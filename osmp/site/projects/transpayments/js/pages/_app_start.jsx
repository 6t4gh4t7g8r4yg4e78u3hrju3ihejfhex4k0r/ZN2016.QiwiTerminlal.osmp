"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}};define("../../projects/transpayments/js/pages/_app_start",["jsx!pages/page","terminal","stores/regProvider"],function(a,b,c){var d=function(a){function d(){_classCallCheck(this,d),_get(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,"_app_start"),this._confirmExit=!1,this.timeout=15e3}return _inherits(d,a),_createClass(d,[{key:"onShow",value:function(){var a=this;_get(Object.getPrototypeOf(d.prototype),"onShow",this).call(this),this.updateNavigation(!1),this.showPreloader({title:"Загрузка",type:"start"}),console.warn("Загрузка Init");try{b.send("GetStartParam","true","StartParam").then(function(b){return a.loadLocalProvider(b.StartParam)}).then(function(b){var d=_slicedToArray(b,2),e=d[0],f=d[1];return a.session.set("provider",f),a.session.set("country",e),c.getProvider(a.storage.get("provider"))}).then(function(b){a.session.set("regProvider",b),a.setLanguage(a.session.get("country").default_lang),a.session.get("country").langs.length>1?a.jump("language"):a.jump("account"),a.update()}).done()}catch(e){throw new qiwi.errors.SystemError("Ошибка подгрузки данных",e)}}},{key:"loadLocalProvider",value:function(a){var b=this;return qiwi.utils.require("text!../../projects/transpayments/js/vo/providers.json").then(function(c){return new Promise(function(d,e){try{var f=JSON.parse(c);b.session.set("providers",f.providers);var g=f.providers.filter(function(b){return b.id==a})[0],h=f.countries[g.country];d([h,g])}catch(i){e("Error find local provider")}})})}},{key:"createClass",value:function(){var a=this;return this.loadElements().then(function(){return _get(Object.getPrototypeOf(d.prototype),"createClass",a).call(a,{render:function(){return React.createElement("div",{id:"init-page"})}})})}}]),d}(a);return d});