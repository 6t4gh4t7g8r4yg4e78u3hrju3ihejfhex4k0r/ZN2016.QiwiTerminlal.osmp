"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}};define("../../projects/transpayments/js/pages/_oferta",["jsx!pages/page"],function(a){var b=function(a){function b(){_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"_oferta"),this.currentContent=""}return _inherits(b,a),_createClass(b,[{key:"onShow",value:function(){var a=this;_get(Object.getPrototypeOf(b.prototype),"onShow",this).call(this),this.showPreloader(),qiwi.utils.require("text!../../QK_oferta_transgranica.xml").then(function(b){var c=new DOMParser,d=c.parseFromString(b,"text/xml"),e=d.evaluate("root/oferta[@name='qiwi']",d,null,XPathResult.ANY_TYPE,null).iterateNext(),f="";e&&(f=e.textContent.replace(/<\/?font.*>/g,"")),a.currentContent=f,a.updateNavigation({exitButton:{visible:!0},prevButton:{visible:!0},nextButton:{visible:!1}}),a.setLogo(a.session.get("regProvider").logo?"../img/ui_item/"+a.session.get("regProvider").logo:"../projects/transpayments/img/logo.png"),a.hidePreloader(),a.update()})}},{key:"createClass",value:function(){var a=this;return this.loadElements(["button"]).then(function(c){var d=_slicedToArray(c,1),e=d[0];return _get(Object.getPrototypeOf(b.prototype),"createClass",a).call(a,{getInitialState:function(){return{initTop:630,topMargin:0,current:1,header:"",leftButtonEnabled:!1,rightButtonEnabled:!0}},onLeft:function(){this.state.leftButtonEnabled&&this.setState({current:this.state.current-1,topMargin:this.state.initTop-this.state.initTop*(this.state.current-1),header:this.state.current-1+qiwi.i18n("offerta_page.count_of")+this.state.total,leftButtonEnabled:this.state.current-1>1,rightButtonEnabled:!0})},onRight:function(){this.state.rightButtonEnabled&&this.setState({current:this.state.current+1,topMargin:this.state.initTop-this.state.initTop*(this.state.current+1),header:this.state.current+1+qiwi.i18n("offerta_page.count_of")+this.state.total,rightButtonEnabled:this.state.current+1<this.state.total,leftButtonEnabled:!0})},componentDidMount:function(){var a=React.findDOMNode(this.refs.offerta),b=Math.ceil((a.lastChild.offsetTop||a.lastElementChild.offsetTop||1)/this.state.initTop);this.setState({total:b,header:this.state.current+qiwi.i18n("offerta_page.count_of")+b})},render:function(){var a=this;return React.createElement("div",{id:"offertus-page"},React.createElement("div",{className:"header"},React.createElement("div",{className:"provider"},this.state.header),React.createElement("div",{className:"header"},qiwi.i18n("offerta_page.title"))),React.createElement(e,{id:"left-button",enabled:this.state.leftButtonEnabled,className:"offertus-arrow-button offertus-arrow-button-left regular-button",onClick:function(){return a.onLeft()},text:qiwi.i18n("offerta_page.prev")}),React.createElement(e,{id:"right-button",enabled:this.state.rightButtonEnabled,className:"offertus-arrow-button offertus-arrow-button-right regular-button",onClick:function(){return a.onRight()},text:qiwi.i18n("offerta_page.next")}),React.createElement("div",{className:"offertus-container"},React.createElement("div",{className:"offertus-content",ref:"offerta",style:{marginTop:this.state.topMargin},dangerouslySetInnerHTML:{__html:this.props.currentContent}})))}})})}},{key:"state",get:function(){return{currentContent:this.currentContent}}}]),b}(a);return b});