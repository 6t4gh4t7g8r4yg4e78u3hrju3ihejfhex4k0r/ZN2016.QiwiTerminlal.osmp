"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}};define("../../projects/transpayments/js/utils/_commissions",["dispatcher"],function(a){var b=function(a){function b(a,c){_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this._profiles=a.filter(function(a){return a.providerId==c})[0].commissionInfo.map(function(a){var b={bound:Number(a.fromAmount)||0,rate:Number(a.commissionPercent),fixed:Number(a.commissionFix)||0,max:Number("inf"===a.commissionMax?null:a.commissionMax)||Number.MAX_VALUE,min:Number(a.commissionMin)||0,upperBound:"inf"===a.toAmount?null:a.toAmount};return b.isDefault=!a.toAmount&&!a.fromAmount&&!a.commissionFix&&!a.commissionMin&&!a.commissionMax&&qiwi.utils.isCorrectNumber(b.rate),b.upperBound=Number(b.upperBound)||15e3,b.max<b.min&&(b.max=b.min),b})}return _inherits(b,a),_createClass(b,[{key:"getComment",value:function(a){var b="";return a.fixed&&(b+=a.fixed+" руб."),a.fixed&&0!==a.rate&&(b+=" + "),a.fixed&&0===a.rate||(b+=qiwi.utils.round2(a.rate)+"%"),a.min&&(b+=", но не менее "+qiwi.utils.toSum(a.min)+" руб."),a.max!==Number.MAX_VALUE&&(b+=(a.min?" и не":", но")+" не более "+qiwi.utils.toSum(a.max)+" руб."),b}},{key:"applicability",value:function(a){return a.isDefault?"Другие условия":(15e3===a.upperBound?"от "+a.bound:a.bound+" - "+a.upperBound)+"\n					руб."}},{key:"profiles",get:function(){var a=this;return this._profiles.map(function(b){return{summ:a.applicability(b),commiss:a.getComment(b)}})}}]),b}(a);return b});