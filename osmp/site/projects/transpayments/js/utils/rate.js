"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();define("../../projects/transpayments/js/utils/rate",function(){var a=function(){function a(b,c,d,e,f,g,h){_classCallCheck(this,a),this._parserRateQiwi=null,this._rateQiwi=-1,this._custom_calc_course=c,this._from=d,this._to=e,this._rateName=f,this._rateFormat=g,this._rate_custom_format=h,this._parserRateQiwi=(new DOMParser).parseFromString(b,"text/xml")}return _createClass(a,[{key:"convert",value:function(a){return a/this._rateQiwi}},{key:"getCurrentRate",value:function(a,b,c){try{var d=this._parserRateQiwi.evaluate('/response/rate[@from="'+b+'" and @to="'+a+'"]',this._parserRateQiwi,null,XPathResult.ANY_TYPE,null).iterateNext();if(d)return Number(d.attributes[c].textContent)}catch(e){}return 0}},{key:"formattedRate",value:function(){var a="";if("none"==this._custom_calc_course?this._rateQiwi=this.getCurrentRate(this._to,this._from,this._rateName):this._rateQiwi=this[this._custom_calc_course](),0==this._rate_custom_format.length){var b=this._rateFormat.split("|")[0],c=this._rateFormat.split("|")[1],d=this._rateFormat.split("|")[2],e=this._rateFormat.split("|")[3];a=b+" "+c+" = "+Math.floor(this._rateQiwi*Number(b)*d*100)/100+" "+e}else{var b=this._rateFormat.split("|")[0],c=this._rateFormat.split("|")[1],d=this._rateFormat.split("|")[2],e=this._rateFormat.split("|")[3];a=b+" "+c+" = "+Math.round(1/this._rateQiwi*1e4)/1e4+" "+e}return a}},{key:"BelCourseCalculation",value:function(){var a=0;try{var b=this.getCurrentRate(643,840,"rate");b=Math.round(1e5*b)/1e5;var c=this.getCurrentRate(840,643,"rate_cbrf");c=Math.round(1e5*c)/1e5;var d=this.getCurrentRate(643,974,"rate_cbrf");d=Math.round(1e5*d)/1e5,a=b*c*d*.97,a=Math.round(100*a)/100}catch(e){a=0}return a}},{key:"ArmCourseCalculation",value:function(){var a=0;try{var b=this.getCurrentRate(840,643,"rate");b=Math.round(1e5*b)/1e5;var c=this.getCurrentRate(840,643,"rate_cbrf");c=Math.round(100*c)/100;var d=this.getCurrentRate(643,51,"rate_cbrf");d=Math.round(1e5*d)/1e5,a=b*c*d*.98/1e3,a=Math.round(100*a)/100}catch(e){a=0}return a}}]),a}();return a});