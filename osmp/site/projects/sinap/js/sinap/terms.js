"use strict";System.register(["model/commissions","constants/currency","model/limits"],function(_export,_context){function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Commissions,Currency,Limits,Limit,_createClass,Identification,Money,SumConstraintLimit,SumConstraint,TYPE,Terms,QDTerms,OfflineQWTerms,OnlineQWTerms;return{setters:[function(_modelCommissions){Commissions=_modelCommissions.Commissions},function(_constantsCurrency){Currency=_constantsCurrency["default"]},function(_modelLimits){Limits=_modelLimits.Limits,Limit=_modelLimits.Limit}],execute:function(){_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Identification=function Identification(_ref){var required=_ref.required;if(_classCallCheck(this,Identification),null===required||void 0===required)throw new Error("Не определено свойство required в identification в terms.");this.required="true"===required||required===!0||!1},Money=function Money(_ref2){var currency=_ref2.currency,amount=_ref2.amount;if(_classCallCheck(this,Money),isNaN(Number(currency)))throw new Error("Свойство currency в money в terms не является числом.");if(isNaN(Number(amount)))throw new Error("Свойство amount в money в terms не является числом.");this.currency=(currency||"").toString()||Currency.DEFAULT,this.amount=Number(amount)||0},SumConstraintLimit=function(_Limit){function SumConstraintLimit(_ref3){var min=_ref3.min,max=_ref3.max,currency=_ref3.currency;return _classCallCheck(this,SumConstraintLimit),_possibleConstructorReturn(this,Object.getPrototypeOf(SumConstraintLimit).call(this,{min:min||0,max:max||Number.MAX_VALUE,currency:currency}))}return _inherits(SumConstraintLimit,_Limit),SumConstraintLimit}(Limit),SumConstraint=function(){function SumConstraint(_ref4){var type=_ref4.type,sum=_ref4.sum,suggestedSum=_ref4.suggestedSum,limit=_ref4.limit;if(_classCallCheck(this,SumConstraint),!type)throw new Error("Нет типа sumConstraint в terms.");if(this.type=type,type===SumConstraint.TYPE.FIXED){if(!sum)throw new Error("Не указана сумма ("+sum+") в fixed sumConstraint в terms.");this.fixed=new Money(sum)}else{if(type!==SumConstraint.TYPE.EDITABLE)throw new Error("Некорректный тип ("+type+") в sumConstraint в terms.");this.suggested=suggestedSum&&new Money(suggestedSum)||null,this.limit=limit&&new SumConstraintLimit(limit)||null}}return _createClass(SumConstraint,[{key:"isFixed",get:function(){return this.type===SumConstraint.TYPE.FIXED}}],[{key:"TYPE",get:function(){return{FIXED:"FixedSumConstraint",EDITABLE:"EditableSumConstraint"}}}]),SumConstraint}(),TYPE={QD:"DefaultQDTerms",QW_ONLINE:"OnlineQWTransitTerms",QW_OFFLINE:"OfflineQWTransitTerms"},Terms=function(){function Terms(){_classCallCheck(this,Terms)}return _createClass(Terms,[{key:"isQD",get:function(){return!0}},{key:"isQWOnline",get:function(){return!1}}]),Terms}(),QDTerms=function(_Terms){function QDTerms(){var _ref5=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],_ref5$qd=_ref5.qd,qd=void 0===_ref5$qd?-1:_ref5$qd,sumConstraint=_ref5.sumConstraint;_classCallCheck(this,QDTerms);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(QDTerms).call(this));if(!qd)throw new Error("Не определен qd id в terms.");return _this2.qd=Number(qd),_this2.sumConstraint=sumConstraint?new SumConstraint(sumConstraint):null,_this2}return _inherits(QDTerms,_Terms),QDTerms}(Terms),OfflineQWTerms=function(_QDTerms){function OfflineQWTerms(_ref6){var qd=_ref6.qd,qw=_ref6.qw,commission=_ref6.commission,limits=_ref6.limits,description=_ref6.description,overpayment=_ref6.overpayment,underpayment=_ref6.underpayment,identification=_ref6.identification,deadline=_ref6.deadline,sumConstraint=_ref6.sumConstraint;if(_classCallCheck(this,OfflineQWTerms),!qw)throw new Error("Не определен qw id в terms.");var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(OfflineQWTerms).call(this,{qd:qd,sumConstraint:sumConstraint}));if(_this3.qw=Number(qw)||null,null===commission||void 0===commission)throw new Error("Не определено свойство commission в QW terms.");if(null===limits||void 0===limits)throw new Error("Не определено свойство limits в QW terms.");if(null===description||void 0===description)throw new Error("Не определено свойство description в QW terms.");if(null===overpayment||void 0===overpayment)throw new Error("Не определено свойство overpayment в QW terms.");if(null===underpayment||void 0===underpayment)throw new Error("Не определено свойство underpayment в QW terms.");if(null===identification||void 0===identification)throw new Error("Не определено свойство identification в QW terms.");return _this3.commission=new Commissions(commission),_this3.limits=new Limits(limits),_this3.description=(description||"").toString(),_this3.overpayment=overpayment||!1,_this3.underpayment=underpayment||!1,_this3.identification=new Identification(identification),_this3.deadline=(deadline||"").toString(),_this3}return _inherits(OfflineQWTerms,_QDTerms),_createClass(OfflineQWTerms,[{key:"isQD",get:function(){return!1}}]),OfflineQWTerms}(QDTerms),OnlineQWTerms=function(_OfflineQWTerms){function OnlineQWTerms(){return _classCallCheck(this,OnlineQWTerms),_possibleConstructorReturn(this,Object.getPrototypeOf(OnlineQWTerms).apply(this,arguments))}return _inherits(OnlineQWTerms,_OfflineQWTerms),_createClass(OnlineQWTerms,[{key:"isQWOnline",get:function(){return!0}}]),OnlineQWTerms}(OfflineQWTerms),_export("default",function(config){if(!config)return null;switch(config.type){case TYPE.QD:return new QDTerms(config);case TYPE.QW_ONLINE:return new OnlineQWTerms(config);case TYPE.QW_OFFLINE:return new OfflineQWTerms(config);default:throw new Error("Некорректный тип terms: "+config.type+".")}})}}});