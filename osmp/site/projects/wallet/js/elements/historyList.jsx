"use strict";System.register(["jsx!elements/button","jsx!elements/listButtons"],function(_export,_context){var Button,ListButtons,HistoryItem;return{setters:[function(_jsxElementsButton){Button=_jsxElementsButton["default"]},function(_jsxElementsListButtons){ListButtons=_jsxElementsListButtons["default"]}],execute:function(){HistoryItem=React.createClass({propTypes:{record:React.PropTypes.object},getDefaultProps:function(){return{record:{}}},getInitialState:function(){return{status:"",date:"",time:"",name:"",account:"",result:"",summ:0,operationType:"",operationValue:0,commission:0}},componentWillMount:function(){this.setState({status:"../projects/wallet/img/icons/report_"+this.props.record.status+".png",date:this.props.record.date.split(" ")[0],time:this.props.record.date.split(" ")[1],name:this.props.record.name,account:this.props.record.account,result:this.props.record.result,summ:qiwi.utils.toSum(this.props.record.summ.value)+" "+this.props.record.summ.currency,operationType:"income"==this.props.record.operationType?qiwi.i18n("historyPage.operationType.income"):qiwi.i18n("historyPage.operationType.outcome"),operationValue:qiwi.utils.toSum(this.props.record.operation.sum.value)+" "+this.props.record.operation.sum.currency,commission:this.props.record.operation.commiss?qiwi.utils.toSum(this.props.record.operation.commiss.value)+" "+this.props.record.operation.commiss.currency:null})},componentWillReceiveProps:function(nextProps){this.setState({status:"../projects/wallet/img/icons/report_"+nextProps.record.status+".png",date:nextProps.record.date.split(" ")[0],time:nextProps.record.date.split(" ")[1],name:nextProps.record.name,account:nextProps.record.account,result:nextProps.record.result,summ:qiwi.utils.toSum(nextProps.record.summ.value)+" "+nextProps.record.summ.currency,operationType:"income"==nextProps.record.operationType?qiwi.i18n("historyPage.operationType.income"):qiwi.i18n("historyPage.operationType.outcome"),operationValue:qiwi.utils.toSum(nextProps.record.operation.sum.value)+" "+nextProps.record.operation.sum.currency,commission:nextProps.record.operation.commiss?qiwi.utils.toSum(nextProps.record.operation.commiss.value)+" "+nextProps.record.operation.commiss.currency:null})},render:function(){return React.createElement("div",{className:"item",key:Math.random()},React.createElement("div",{className:"status"},React.createElement("div",{className:"status__icon",style:{background:'transparent url("'+this.state.status+'") no-repeat scroll center center',width:"70px",height:"60px"}}),React.createElement("div",{className:"status__date"},this.state.date),React.createElement("div",{className:"status__time"},this.state.time)),React.createElement("div",{className:"info"},React.createElement("div",{className:"info__name_container"},React.createElement("div",{className:"info__name"},this.state.name)),React.createElement("div",{className:"info__account"},this.state.account),React.createElement("div",{className:"info__result"},this.state.result)),React.createElement("div",{className:"operation"},React.createElement("div",{className:"operation__summ-title"},qiwi.i18n("historyPage.summTitle")),React.createElement("div",{className:"operation__summ"},this.state.summ),React.createElement("div",{className:"operation__type-label"},qiwi.i18n("historyPage.operationTypeTitle")),React.createElement("div",{className:"operation__value"},this.state.operationType," ",this.state.operationValue),this.state.commission?React.createElement("div",{className:"operation__commission"},qiwi.i18n("historyPage.commisionTitle")+" "+this.state.commission):null))}}),_export("default",React.createClass({propTypes:{list:React.PropTypes.array},getInitialState:function(){return{current:0,maxOnPage:4,leftButtonEnabled:!1,rightButtonEnabled:!1}},componentWillMount:function(){this.setState({rightButtonEnabled:this.state.current+1<Math.ceil(this.props.list.length/this.state.maxOnPage)})},componentWillReceiveProps:function(props){this.setState({rightButtonEnabled:this.state.current+1<Math.ceil(props.list.length/this.state.maxOnPage)})},onLeft:function(){this.state.leftButtonEnabled&&this.setState({current:this.state.current-1,leftButtonEnabled:this.state.current>1,rightButtonEnabled:!0})},onRight:function(){this.state.rightButtonEnabled&&this.setState({current:this.state.current+1,rightButtonEnabled:this.state.current+1<Math.ceil(this.props.list.length/this.state.maxOnPage)-1,leftButtonEnabled:!0})},getDefaultProps:function(){return{list:[]}},render:function(){for(var _this=this,items=[],i=this.state.current*this.state.maxOnPage;i<this.state.current*this.state.maxOnPage+this.state.maxOnPage&&i<this.props.list.length;i++)items.push(this.props.list[i]);return React.createElement("div",{id:"history-container"},React.createElement("div",{id:"b-history-list"},React.createElement("div",{className:"mask-container"},React.createElement("div",{className:"scrollable-content",ref:"history"},React.createElement("div",{className:"b-history__container"},items.map(function(item){return React.createElement(HistoryItem,{key:Math.random(),record:item})}))))),React.createElement(ListButtons,{onLeft:function(){return _this.onLeft()},onRight:function(){return _this.onRight()},leftButtonEnabled:this.state.leftButtonEnabled,rightButtonEnabled:this.state.rightButtonEnabled,color:"blue"}))}}))}}});