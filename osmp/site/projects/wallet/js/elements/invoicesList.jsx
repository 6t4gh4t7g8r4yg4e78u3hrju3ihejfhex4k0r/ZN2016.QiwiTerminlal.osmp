"use strict";System.register(["jsx!elements/button","jsx!elements/listButtons"],function(_export,_context){var Button,ListButtons,InvoiceItem;return{setters:[function(_jsxElementsButton){Button=_jsxElementsButton["default"]},function(_jsxElementsListButtons){ListButtons=_jsxElementsListButtons["default"]}],execute:function(){InvoiceItem=React.createClass({propTypes:{},getInitialState:function(){return{checked:!1}},getDefaultProps:function(){return{bill_date:new Date,acc:"",comment:"",summTitle:"",summ:"",amountTitle:"",amount:"",item:{},checked:!1}},componentWillMount:function(){},componentWillReceiveProps:function(props){},onIconClick:function(){this.props.item.checked=!this.props.item.checked,this.props.checkItem(this.props.item)},onContentClick:function(){this.props.selectItem(this.props.item)},render:function(){return React.createElement("div",{className:"invoice-item"},React.createElement("div",{className:"icon",style:{background:'transparent url("'+(this.props.item.checked?"../projects/wallet/img/icons/invoiceSelected.png":"../projects/wallet/img/icons/invoice.png")+'") no-repeat scroll center center',width:"100px",height:"100px"},onClick:this.onIconClick},this.state.checked?"":qiwi.i18n("invoicesPage.select")),React.createElement("div",{className:"content",onClick:this.onContentClick},React.createElement("div",{className:"left"},React.createElement("div",{className:"date"},this.props.bill_date),React.createElement("div",{className:"acc"},this.props.acc),React.createElement("div",{className:"comment"},this.props.comment)),React.createElement("div",{className:"right"},React.createElement("div",{className:"summTitle"},this.props.summTitle),React.createElement("div",{className:"summ"},this.props.summ),React.createElement("div",{className:"amountTitle"},this.props.amountTitle),React.createElement("div",{className:"amount"},this.props.amount))))}}),_export("default",React.createClass({propTypes:{list:React.PropTypes.array,checkedList:React.PropTypes.array,onCheck:React.PropTypes.func,onSelect:React.PropTypes.func},getInitialState:function(){return{current:0,maxOnPage:3,leftButtonEnabled:!1,rightButtonEnabled:!0}},componentWillMount:function(){this.setState({rightButtonEnabled:this.state.current<Math.ceil(this.props.list.length/this.state.maxOnPage)-1})},componentWillReceiveProps:function(props){this.setState({rightButtonEnabled:this.state.current<Math.ceil(props.list.length/this.state.maxOnPage)-1})},onLeft:function(){this.state.leftButtonEnabled&&this.setState({current:this.state.current-1,leftButtonEnabled:this.state.current>1,rightButtonEnabled:!0})},onRight:function(){this.state.rightButtonEnabled&&this.setState({current:this.state.current+1,rightButtonEnabled:this.state.current+1<Math.ceil(this.props.list.length/this.state.maxOnPage)-1,leftButtonEnabled:!0})},getDefaultProps:function(){return{list:[],checkedList:[]}},onCheck:function(src,checked){this.props.list.map(function(item){item.id==src.id&&(item.checked=src.checked)}),this.props.onCheck(this.props.list),this.forceUpdate()},render:function(){for(var _this=this,items=[],i=this.state.current*this.state.maxOnPage;i<this.state.current*this.state.maxOnPage+this.state.maxOnPage&&i<this.props.list.length;i++)items.push(this.props.list[i]);return React.createElement("div",{id:"b-invoices-list"},React.createElement(ListButtons,{onLeft:function(){return _this.onLeft()},onRight:function(){return _this.onRight()},leftButtonEnabled:this.state.leftButtonEnabled,rightButtonEnabled:this.state.rightButtonEnabled,color:"white"}),React.createElement("div",{className:"b-invoices__container"},items.map(function(item){return React.createElement(InvoiceItem,{key:Math.random(),item:item,bill_date:item.bill_date,acc:item.trm_id,comment:item.comment,checked:item.checked,summTitle:qiwi.i18n("invoicesPage.sumInvoice"),summ:qiwi.utils.toSum(item.amount)+" "+item.currencyText,amountTitle:qiwi.i18n("invoicesPage.totalInvoice"),amount:qiwi.utils.toSum(item.toPay)+" "+item.toPayCurrencyText,checkItem:function(itm,checked){_this.onCheck(itm,checked)},selectItem:function(item){return _this.props.onSelect(item)}})})))}}))}}});