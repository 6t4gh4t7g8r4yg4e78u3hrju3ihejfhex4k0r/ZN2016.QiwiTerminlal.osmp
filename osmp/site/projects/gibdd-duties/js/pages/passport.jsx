"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _slicedToArray=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_get=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)};define(["jsx!pages/page","payment","validators","../model/gibddDuty"],function(t,e,r,n){var o=function(t){function o(t){return _classCallCheck(this,o),_possibleConstructorReturn(this,Object.getPrototypeOf(o).call(this,t||"passport"))}return _inherits(o,t),_createClass(o,[{key:"onShow",value:function(){_get(Object.getPrototypeOf(o.prototype),"onShow",this).call(this),this.setLogo(e.state.logo),this.updateNavigation({nextButton:{enabled:!1}}),this.update()}},{key:"onUpdate",value:function(t){var e=t.no,r=t.valid;this.updateNavigation({nextButton:{enabled:r}}),n.user={passport:e.toString()},this.session.set("passportNumber",e)}},{key:"createClass",value:function(){var t=this;return this.loadElements(["animatedTextField","numpad","button","pageHeader"]).then(function(e){var r=_slicedToArray(e,4),n=r[0],i=r[1],a=(r[2],r[3]);return _get(Object.getPrototypeOf(o.prototype),"createClass",t).call(t,{componentWillMount:function(){var t={no:this.props.savedNumber.toString(),valid:this.props.field.validator.validate(this.props.savedNumber.toString())};this.setState(t),this.props.onUpdate(t)},shouldComponentUpdate:function(t,e){return e.no===this.state.no?!1:(this.props.onUpdate(e),!0)},removeSymbol:function(){this.setState({no:this.state.no.slice(0,-1),valid:!1})},addSymbol:function(t){var e=this.props.field,r=this.state.no+(qiwi.utils.mask(this.state.no,e.mask.inner).length>=e.mask.inner.length?"":t);this.setState({no:r,valid:e.validator.validate(r)})},getInitialState:function(){return{no:""}},getDefaultProps:function(){return{savedNumber:"",field:{}}},render:function(){var t=this;return React.createElement("div",{className:"passport-number"},React.createElement(a,{provider:this.props.providerName,title:qiwi.i18n("gibdd_duties.passport.header"),subtitle:qiwi.i18n("gibdd_duties.passport.comment")}),React.createElement(n,{onEraseClick:function(){return t.removeSymbol()},text:this.state.no,mask:this.props.field.mask,width:"800",eraseWidth:"133",className:"textfield-temporary"}),React.createElement(i,{onClick:function(e){return t.addSymbol(e.toString())}}))}})})}},{key:"state",get:function(){return{savedNumber:this.session.get("passportNumber"),field:{mask:{shown:"XX XX XXXXXX",inner:"** ** ******"},validator:new r.PassportValidator},providerName:e.state.provider.fullName}}}]),o}(t);return o});