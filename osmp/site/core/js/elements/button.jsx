"use strict";System.register([],function(_export,_context){function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass,_React,Component,PropTypes,Button;return{setters:[],execute:function(){_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_React=React,Component=_React.Component,PropTypes=_React.PropTypes,Button=function(_Component){function Button(props){_classCallCheck(this,Button);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Button).call(this,props));return _this.state={clicked:!1},_this}return _inherits(Button,_Component),_createClass(Button,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var autoResize=this.props.autoResize;if(autoResize){var propsHeight=autoResize.height,_autoResize$min=autoResize.min,min=void 0===_autoResize$min?16:_autoResize$min,_autoResize$max=autoResize.max,max=void 0===_autoResize$max?45:_autoResize$max,step=autoResize.step,_autoResize$units=autoResize.units,units=void 0===_autoResize$units?"":_autoResize$units,button=this.refs.button,_state=this.state,_state$height=_state.height,height=void 0===_state$height?propsHeight:_state$height,fontSize=_state.fontSize;if(!height){var content=[].concat(_toConsumableArray(button.children)).find(function(child){return child.className.includes("content")});content.style.fontSize=0,this.setState({height:button.offsetHeight}),content.style.fontSize=""}if(!fontSize)return void this.setState({fontSize:""+max+units});var currentStep=step||(Number(max)-Number(min))/10,currentFontSize=Number(fontSize.split(" ")[0]);button.offsetHeight>height&&currentFontSize>min&&this.setState({fontSize:""+qiwi.utils.round2(Math.max(min,currentFontSize-currentStep))+units})}}},{key:"getIcon",value:function(_ref){var name=_ref.name,_ref$canBeLight=_ref.canBeLight,canBeLight=void 0===_ref$canBeLight?!1:_ref$canBeLight,_ref$projectSpecific=_ref.projectSpecific,projectSpecific=void 0===_ref$projectSpecific?!1:_ref$projectSpecific,_ref$path=_ref.path,path=void 0===_ref$path?"":_ref$path,_ref$extension=_ref.extension,extension=void 0===_ref$extension?"png":_ref$extension,_ref$prefix=_ref.prefix,prefix=void 0===_ref$prefix?"":_ref$prefix;return(""+prefix+(projectSpecific?"../projects/"+qiwi.application.name:".")+"/img/"+path+name+(canBeLight&&document.config.isLight?"-light":"")+"."+extension).replace(/\/{2,}/g,"/")}},{key:"render",value:function(){var _this2=this;return React.createElement("div",{id:this.props.id||null,ref:"button",className:this.props.className+" "+(this.state.clicked?"pushed":"")+" "+(this.props.disableDefaultClass?"":"button")+" "+(this.props.icon?"with-icon":""),onMouseDown:function(){_this2.isMounted&&!_this2.isMounted()||_this2.setState({clicked:!0})},onMouseUp:function(){_this2.isMounted&&!_this2.isMounted()||(_this2.setState({clicked:!1}),_this2.props.enabled?_this2.props.onClick(_this2.props.data):_this2.props.disabledClick(_this2.props.data))},onMouseOut:function(){_this2.isMounted&&!_this2.isMounted()||_this2.setState({clicked:!1})},style:qiwi.utils.extend({},this.props.style,{opacity:this.props.enabled?1:.5,width:this.props.width||null})},this.props.icon?React.createElement("div",{className:"button-icon"},React.createElement("img",{className:"icon "+("string"!=typeof this.props.icon&&this.props.icon.circled?"circle":""),src:"string"==typeof this.props.icon?this.props.icon:this.getIcon(this.props.icon)}),this.props.iconText?React.createElement("div",{className:"text"},this.props.iconText):null):null,React.createElement("div",{className:"button-content",style:{maxWidth:this.props.icon&&null!==this.props.width?(this.props.width||500)-160:null,fontSize:this.state.fontSize||null}},this.props.text),this.props.extra||null)}}]),Button}(Component),Button.propTypes={text:PropTypes.node,data:PropTypes.node,onClick:PropTypes.func,disabledClick:PropTypes.func,enabled:PropTypes.bool,className:PropTypes.string,disableDefaultClass:PropTypes.bool,width:PropTypes.string,icon:PropTypes.oneOfType([PropTypes.string,PropTypes.shape({name:PropTypes.string.isRequired,canBeLight:PropTypes.bool,projectSpecific:PropTypes.bool,path:PropTypes.string,extension:PropTypes.string})]),autoResize:PropTypes.shape({height:PropTypes.number,min:PropTypes.number,max:PropTypes.number,step:PropTypes.number,units:PropTypes.string}),iconText:PropTypes.string},Button.defaultProps={className:"",enabled:!0,disableDefaultClass:!1,disabledClick:function(){},onClick:function(){}},_export("default",Button)}}});