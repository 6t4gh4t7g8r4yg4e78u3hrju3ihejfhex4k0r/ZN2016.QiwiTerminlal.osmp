"use strict";System.register(["terminal","storage"],function(_export,_context){var terminal,storage,_typeof;return{setters:[function(_terminal){terminal=_terminal["default"]},function(_storage){storage=_storage["default"]}],execute:function(){_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_export("default",React.createClass({getInitialState:function(){return{z_index:0,y_pos:0,x_pos:0,width:1,height:1,url:"../app_advert_adapter.html",canShow:!0}},componentDidMount:function(){var _this=this;try{var _ret=function(){if(!_this.state.canShow)return{v:void 0};_this.setState({y_pos:_this.props.y_pos,x_pos:_this.props.x_pos}),React.findDOMNode(_this.refs.ifr).contentWindow.allowedAdvert=_this.props.place,React.findDOMNode(_this.refs.ifr).contentWindow.params=_this.props.params,React.findDOMNode(_this.refs.ifr).contentWindow.terminal={};var regUrl="../index.html";React.findDOMNode(_this.refs.ifr).contentWindow.terminal.processcommand=React.findDOMNode(_this.refs.ifr).contentWindow.terminal.ProcessCommand=function(key,value){try{switch(key){case"PrvId":"15790"==value||"15793"==value?_this.setState({canShow:!1}):terminal.send(key,value);break;case"exit":_this.props.onExit({type:"adv",url:regUrl});break;case"top":_this.setState({z_index:2e6});break;case"adv_show":_this.setState({width:_this.props.adv_width,height:_this.props.adv_height});break;case"bottom":_this.setState({z_index:-2e6});break;case"close":_this.setState({width:1,height:1});break;case"stopTimer":_this.props.onStopTimer();break;case"fullscreen":_this.setState({width:1280,height:1024,y_pos:0,y_pox:0});break;case"change_size":_this.setState({width:JSON.parse(value).width,height:JSON.parse(value).height,y_pos:0,x_pos:0});break;case"exit_to_prv":storage.set("interfaceStartParams","#change_type#"+JSON.stringify({page:"provider",id:value})),_this.props.onExit({type:"adv",url:regUrl});break;case"exit_to_category":storage.set("interfaceStartParams","#change_type#"+JSON.stringify({page:"category",id:value})),_this.props.onExit({type:"adv",url:regUrl});break;default:terminal.send(key,value)}}catch(e){}},terminal.on("response",function(key,value){try{_this.refs.ifr&&React.findDOMNode(_this.refs.ifr).contentWindow.terminal&&React.findDOMNode(_this.refs.ifr).contentWindow.terminal.OnResponse(key,value)}catch(e){}})}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v}catch(e){}},componentWillUnmount:function(){try{if(React.findDOMNode(this.refs.ifr)){React.findDOMNode(this.refs.ifr).contentWindow.terminal.processcommand=React.findDOMNode(this.refs.ifr).contentWindow.terminal.ProcessCommand=null,React.findDOMNode(this.refs.ifr).contentWindow.terminal=null,terminal.off("response");var mountNode=React.findDOMNode(this.refs.ifr);React.unmountComponentAtNode(mountNode)}}catch(e){}},onLocationChange:function(){},render:function(){var frame=this.state.canShow?React.createElement("iframe",{ref:"ifr",style:{position:"absolute",pointerEvents:"auto",zIndex:this.state.z_index,top:this.state.y_pos,left:this.state.x_pos,scale:1,background:"transparent"},src:this.state.url,width:this.state.width,height:this.state.height,onLoad:this.onLocationChange,frameBorder:"0"}):null;return React.createElement("div",null,frame)}}))}}});