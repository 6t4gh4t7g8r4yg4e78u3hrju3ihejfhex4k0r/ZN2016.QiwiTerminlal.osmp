"use strict";System.register(["constants/currency"],function(_export,_context){function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Currency,_createClass,Limit,Limits;return{setters:[function(_constantsCurrency){Currency=_constantsCurrency["default"]}],execute:function(){_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_export("Limit",Limit=function(){function Limit(){var _ref=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],_ref$currency=_ref.currency,currency=void 0===_ref$currency?Currency.DEFAULT:_ref$currency,_ref$min=_ref.min,min=void 0===_ref$min?0:_ref$min,max=_ref.max;_classCallCheck(this,Limit),this.currency=Number(currency)||Currency.DEFAULT,this.min=Number(min)||0,this.max=Number(max)||15e3}return _createClass(Limit,[{key:"validate",value:function(){var sum=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return sum>=this.min&&sum<=this.max}}]),Limit}()),_export("Limits",Limits=function(){function Limits(limits){if(_classCallCheck(this,Limits),!limits)throw new Error("Нет иницилизационного объекта limits.");this.limits=(limits instanceof Array?limits:[limits]||[]).map(function(item){return item instanceof Limit?item:new Limit(item)}).reduce(function(obj,item){return obj[item.currency]=item,obj},{}),0===Object.keys(this.limits).length&&(this.limits[Currency.DEFAULT]=new Limit)}return _createClass(Limits,[{key:"addLimit",value:function(item){this.limits[item.currency||Currency.DEFAULT]=item instanceof Limit?item:new Limit(item)}},{key:"forCurrency",value:function(){var currency=arguments.length<=0||void 0===arguments[0]?Currency.DEFAULT:arguments[0];return this.limits[currency]||new Limit}}],[{key:"mix",value:function(){for(var _len=arguments.length,limits=Array(_len),_key=0;_len>_key;_key++)limits[_key]=arguments[_key];var currency=limits[0]instanceof Limit?limits[0].currency:Currency.DEFAULT;return limits=limits.filter(function(a){return a}).map(function(item){return item instanceof Limits?item.forCurrency(currency):item}).map(function(item){return item instanceof Limit?item:new Limit(item)}).filter(function(item){return item instanceof Limit&&item.currency===currency}),new Limit({currency:currency,min:Math.max.apply(Math,_toConsumableArray(limits.map(function(limit){return limit.min}).concat([0]))),max:Math.min.apply(Math,_toConsumableArray(limits.map(function(limit){return limit.max}).concat([15e3])))})}}]),Limits}()),_export("Limit",Limit),_export("Limits",Limits)}}});