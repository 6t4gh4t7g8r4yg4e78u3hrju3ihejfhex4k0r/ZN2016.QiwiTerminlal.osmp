"use strict";System.register(["terminal","underscore"],function(_export,_context){var terminal,_,oldWarn;return{setters:[function(_terminal){terminal=_terminal["default"]},function(_underscore){_=_underscore["default"]}],execute:function(){oldWarn=window.console.warn,window.console.warn=function(){for(var _len=arguments.length,rest=Array(_len),_key=0;_len>_key;_key++)rest[_key]=arguments[_key];return rest.forEach(function(text){oldWarn.call(console,text),terminal.send("WriteToLog","Warn: "+text)})},Promise.prototype.done=function(resolve,reject){return this.then(resolve,reject)["catch"](function(e){return setTimeout(function(){throw e})})},Promise.prototype["finally"]=function(surely){return this["catch"](function(e){return setTimeout(function(){throw e})}).then(surely,surely)},Promise.prototype.surely=function(surely){return this.then(function(result){return surely({successful:!0,result:result})},function(result){return Promise.resolve().then(function(){return surely({successful:!1,result:result})}).then(function(e){return Promise.reject(e)})})},Promise.prototype.interpose=function(onResolve,onCatch){return this.then(function(result){return Promise.resolve().then(function(){return onResolve(result)}).then(function(){return Promise.resolve(result)})},function(error){return Promise.resolve().then(function(){return(onCatch||onResolve)(error)}).then(function(){return Promise.reject(error)})})},Promise.reduce=function(fns,val){return fns.reduce(function(prev,current){return prev.then(function(result){return current(result)})},val instanceof Promise?val:Promise.resolve(val))},Promise.sequence=function(chain){return chain.reduce(function(prev,current){return prev.then(current)},Promise.resolve())},Promise.wait=Promise.timeout=function(delay){return new Promise(function(resolve){return delay?setTimeout(resolve,delay):Promise.resolve()})},Promise.until=function(fn,start){return fn(start).then(function(res){return res instanceof Error?Promise.reject(res):Promise.resolve(res)},function(res){return Promise.until(fn,res)})},Promise["while"]=function(fn,start){return fn(start).then(function(res){return res instanceof Error?Promise.reject(res):Promise["while"](fn,res)},function(res){return Promise.resolve(res)})},_export("default",_.extend({require:function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_len2>_key2;_key2++)args[_key2]=arguments[_key2];return args="string"==typeof args[0]?args:args[0],args?Promise.all(args.map(function(arg){return Promise.reduce(arg.split("|").map(function(alt){return function(){return System["import"](alt.replace(/^(text|jsx)!(.*)$/,"$2!$1").replace(/^\.\.\/\.\.\//,"../")).then(function(loadedFile){return Promise.reject(loadedFile)},function(failed){return Promise.resolve()})}})).then(function(err){return Promise.reject("Failed to load files: "+arg+", sample error: "+err)},function(loadedFile){return Promise.resolve(loadedFile["default"]||loadedFile)})})):Promise.reject("No arguments are supplied")},requireAsScript:function(filename,options,object){return new Promise(function(resolve,reject){var script=document.createElement("script");script.type="text/javascript",script.setAttribute("crossorigin","true"),options&&_.each(options,function(item,key){return script[key]=item}),script.onload=function(){if(script.onload=script.onerror=null,!object)return resolve("Script "+filename+" successfully loaded");var stringified=JSON.stringify(window[object]);document.getElementsByTagName("head")[0].removeChild(script),resolve(JSON.parse(stringified))},script.onerror=function(){reject("Rejected to load: "+filename),script.onload=script.onerror=null},script.src=filename,document.getElementsByTagName("head")[0].appendChild(script)})},nullOrUndefined:function(){for(var _this=this,_len3=arguments.length,args=Array(_len3),_key3=0;_len3>_key3;_key3++)args[_key3]=arguments[_key3];return!!args.filter(function(arg){return _this.isNull(arg)||_this.isUndefined(arg)}).length},deepExtend:function deepExtend(){for(var parentRE=/#{\s*?_\s*?}/,_len4=arguments.length,args=Array(_len4),_key4=0;_len4>_key4;_key4++)args[_key4]=arguments[_key4];var obj=args.shift();return _.each(args,function(source){for(var prop in source)if(_.isUndefined(obj[prop])||_.isFunction(obj[prop])||_.isNull(source[prop])||_.isDate(source[prop]))obj[prop]=source[prop];else if(_.isString(source[prop])&&parentRE.test(source[prop]))_.isString(obj[prop])&&(obj[prop]=source[prop].replace(parentRE,obj[prop]));else if(_.isArray(obj[prop])||_.isArray(source[prop]))if(_.isNull(source[prop])||_.isNull(obj[prop]))obj[prop]=source[prop];else{if(!_.isArray(obj[prop])||!_.isArray(source[prop]))throw new Error("Trying to combine an array with a non-array or null ("+prop+")");obj[prop]=_.reject(deepExtend(_.clone(obj[prop]),source[prop]),function(item){return _.isNull(item)})}else if(_.isObject(obj[prop])||_.isObject(source[prop]))if(_.isNull(obj[prop]||_.isNull(source[prop])))obj[prop]=source[prop];else{if(!_.isObject(obj[prop])||!_.isObject(source[prop]))throw new Error("Trying to combine an object with a non-object or null ("+prop+")");obj[prop]=deepExtend(_.clone(obj[prop]),source[prop])}else obj[prop]=source[prop]}),obj},mask:function(text,_mask){text=text.toString(),_mask=_mask.toString();for(var result="";_mask.length;){if(!text.length)return result+(-1===_mask.indexOf("*")?_mask:"");"*"!==_mask[0]?result+=_mask.substr(0,1):(result+=text.substr(0,1),text=text.slice(1)),_mask=_mask.slice(1)}return result},demask:function(text,mask){return text=text.toString(),mask=mask.toString(),mask.split("").map(function(s,i){return"*"===s?text[i]:"*"!==s&&s===text[i]?"":void 0}).join("")},round2:function(num){var to2=function(num){return Math.round(100*Number(num))/100};return to2(Number(num)-to2(num)>.0049?Number(num)+.01:num)},toSum:function(num){if(num=Number(num),isNaN(num))return"NaN";var rounded=this.round2(Math.abs(num));return(num>=0?"":"-")+Math.trunc(rounded).toString().split("").map(function(d,i,a){return(a.length-i)%3===0&&0!==i?" "+d:d},"").join("")+(rounded.toString().split(".")[1]?"."+(rounded.toString().split(".")[1]+"0").slice(0,2):"")},isCorrectNumber:isFinite,correctNumbers:function(){for(var _len5=arguments.length,rest=Array(_len5),_key5=0;_len5>_key5;_key5++)rest[_key5]=arguments[_key5];return rest.every(isFinite)},compileTemplate:function(__template,__data){_.templateSettings={interpolate:/\$\{(.+?)\}/g};try{return _.template(__template,__data)(__data)}catch(e){return __template}},arrayToString:function(array){return array&&array.length>0?array.map(JSON.stringify).join("|"):""},unescape:function(string){if(!string)return"";var map={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x2F;":"/"};return string.toString().replace(new RegExp("("+Object.keys(map).join("|")+")","g"),function(match){return map[match]})},generateTransaction:function(){var now=new Date;return Number((now.getTime()-6e4*now.getTimezoneOffset()).toString().substr(-12,11))}},_))}}});