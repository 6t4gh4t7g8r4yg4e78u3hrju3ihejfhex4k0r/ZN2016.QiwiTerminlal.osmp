"use strict";System.register([],function(_export,_context){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _typeof,_createClass;return{setters:[],execute:function(){_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_export("default",new(function(){function _class(){_classCallCheck(this,_class)}return _createClass(_class,[{key:"getObjectsByPropertyValue",value:function(obj,key,val){var objects=[];for(var i in obj)obj.hasOwnProperty(i)&&("object"==_typeof(obj[i])?objects=objects.concat(this.getObjectsByPropertyValue(obj[i],key,val)):i==key&&obj[key]==val&&objects.push(obj));return objects}},{key:"getFirstObjectByPropertyValue",value:function(obj,key,val){return this.getObjectsByPropertyValue(obj,key,val)[0]}},{key:"loadScript",value:function(fileName){return new Promise(function(resolve,reject){var scr=document.createElement("script");scr.type="text/javascript",scr.charset="Windows-1251",scr.setAttribute("crossorigin","true"),scr.onload=function(){var result=window.UIProvider;document.getElementsByTagName("head")[0].removeChild(scr),resolve(result)},scr.onerror=function(error){reject("Rejected to load: "+fileName)},scr.src=fileName,document.getElementsByTagName("head")[0].appendChild(scr)})}},{key:"getProvider",value:function(id){var _this=this;return this.loadScript("..//..//config//"+id+".js").then(function(data){return Promise.resolve(_this.parse(data))},function(){return Promise.reject("NO CONFIG FILE: "+id)})}},{key:"parse",value:function(data){var const_params={max_summ:this.getFirstObjectByPropertyValue(data.__objects,"name","max_summ")?this.getFirstObjectByPropertyValue(data.__objects,"name","max_summ").value:15e3,min_summ:this.getFirstObjectByPropertyValue(data.__objects,"name","min_summ")?this.getFirstObjectByPropertyValue(data.__objects,"name","min_summ").value:1};return{id:data.id,longName:data.lName,shortName:data.sName,minSum:data.minSum||0,maxSum:data.maxSum||15e3,logo:this.getFirstObjectByPropertyValue(data.__objects,"type","standard").img,controls:this.getFirstObjectByPropertyValue(data.__objects,"__type","controls")?this.getFirstObjectByPropertyValue(data.__objects,"__type","controls").__objects:[],constParams:const_params}}}]),_class}()))}}});