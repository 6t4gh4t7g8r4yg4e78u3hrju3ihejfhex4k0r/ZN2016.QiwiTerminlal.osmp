"use strict";System.register([],function(_export,_context){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass;return{setters:[],execute:function(){_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_export("default",new(function(){function _class(){_classCallCheck(this,_class)}return _createClass(_class,[{key:"fetch",value:function(id){var _this=this;return qiwi.utils.requireAsScript("../config/"+id+".js",{charset:"windows-1251"},"UIProvider").then(function(_ref){var id=_ref.id,lName=_ref.lName,sName=_ref.sName,data=_ref.__objects;_this.id=id,_this.longName=lName,_this.shortName=sName,_this.logo=data.find(function(param){return"logos"===param.__type}).__objects.find(function(param){return"standard"===param.type}).img,_this.ad1=_this.ad2=_this.ad3=_this.maxSum=_this.minSum=null,_this.controls=[];var constParamsData=data.find(function(param){return"constParams"===param.__type}).__objects;try{_this.ad1=_this.adBlock(constParamsData,1),_this.ad2=_this.adBlock(constParamsData,2),_this.ad3=_this.adBlock(constParamsData,3)}catch(e){}try{_this.maxSum=constParamsData.find(function(param){return"param"===param.__type&&"max_summ"===param.name}).value,_this.minSum=constParamsData.find(function(param){return"param"===param.__type&&"min_summ"===param.name}).value}catch(e){}try{_this.controls=data.find(function(param){return"pages"===param.__type}).__objects[0].find(function(param){return"controls"===param.__type}).__objects}catch(e){}return Promise.resolve(_this)})}},{key:"adBlock",value:function(data,id){if(!data)return null;var block=data.find(function(param){return param.__type==="ad_block_"+id});if(!block)return null;var value=block.value.split("|");if(value.length>1){var date=value[0].split(".");return new Date(date[2].length>2?date[2]:"20"+date[2],date[1],date[0])>new Date?qiwi.utils.unescape(value[1]):null}return qiwi.utils.unescape(value)}}]),_class}()))}}});