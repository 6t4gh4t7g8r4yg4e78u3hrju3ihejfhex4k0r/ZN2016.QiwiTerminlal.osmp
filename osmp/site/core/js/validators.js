"use strict";System.register([],function(_export,_context){function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _typeof,_get,_createClass,Validator,RegexpValidator,LengthValidator,SumValidator,StrictSumValidator,NameValidator,PassportValidator,INNValidator,SNILSValidator,DateValidator,OMSValidator,EMailValidator,PhoneValidator,PinValidator,ConfirmPinValidator,NewPinValidator,TopupCommentValidator,LuhnValidator;return{setters:[],execute:function(){_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Validator=function(){function Validator(params){_classCallCheck(this,Validator),this._params=params}return _createClass(Validator,[{key:"validate",value:function(object){return!!object}},{key:"params",get:function(){return this._params}}]),Validator}(),RegexpValidator=function(_Validator){function RegexpValidator(regexp){_classCallCheck(this,RegexpValidator);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(RegexpValidator).call(this));return _this._regexp=regexp,_this}return _inherits(RegexpValidator,_Validator),_createClass(RegexpValidator,[{key:"validate",value:function(value){return this._regexp?this._regexp.test(value):!1}}]),RegexpValidator}(Validator),LengthValidator=function(_Validator2){function LengthValidator(){var min=arguments.length<=0||void 0===arguments[0]?2:arguments[0],max=arguments.length<=1||void 0===arguments[1]?25:arguments[1];return _classCallCheck(this,LengthValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(LengthValidator).call(this,{min:min,max:max}))}return _inherits(LengthValidator,_Validator2),_createClass(LengthValidator,[{key:"validate",value:function(){var value=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return value.length<=this.params.max&&value.length>=this.params.min}}]),LengthValidator}(Validator),SumValidator=function(_Validator3){function SumValidator(min,max){return _classCallCheck(this,SumValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(SumValidator).call(this,{min:min,max:max}))}return _inherits(SumValidator,_Validator3),_createClass(SumValidator,[{key:"validate",value:function(value){var inputStr=value.toString(),result=!0;return inputStr.indexOf(".")>-1&&(result=/^\d{0,5}[,.]\d{0,2}$/.test(inputStr)),result&&Number(value)<=this.params.max&&Number(value)>=this.params.min}}]),SumValidator}(Validator),StrictSumValidator=function(_SumValidator){function StrictSumValidator(){return _classCallCheck(this,StrictSumValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(StrictSumValidator).apply(this,arguments))}return _inherits(StrictSumValidator,_SumValidator),_createClass(StrictSumValidator,[{key:"validate",value:function(value){return _get(Object.getPrototypeOf(StrictSumValidator.prototype),"validate",this).call(this,value)&&Number(value)<this.params.max&&Number(value)>this.params.min}}]),StrictSumValidator}(SumValidator),NameValidator=function(_LengthValidator){function NameValidator(){return _classCallCheck(this,NameValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(NameValidator).call(this,2,28))}return _inherits(NameValidator,_LengthValidator),NameValidator}(LengthValidator),PassportValidator=function(_RegexpValidator){function PassportValidator(){return _classCallCheck(this,PassportValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(PassportValidator).call(this,/^\d{10}$/))}return _inherits(PassportValidator,_RegexpValidator),_createClass(PassportValidator,[{key:"validate",value:function(){var value=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return value=value.toString(),0===[/(\d)\1{4}/].concat([0,1,2,3,4,5].map(function(n){return new RegExp("01234567890".slice(n,n+6))})).concat([0,1,2,3,4,5].map(function(n){return new RegExp("09876543210".slice(n,n+6))})).map(function(regex){return regex.test(value)}).filter(function(a){return a}).length&&_get(Object.getPrototypeOf(PassportValidator.prototype),"validate",this).call(this,value)}}]),PassportValidator}(RegexpValidator),INNValidator=function(_Validator4){function INNValidator(){return _classCallCheck(this,INNValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(INNValidator).apply(this,arguments))}return _inherits(INNValidator,_Validator4),_createClass(INNValidator,[{key:"validate",value:function(value){if(value+="",!value||!value.length||12!=value.length)return!1;for(var n1_table=[3,7,2,4,10,3,5,9,4,6,8],n2_table=[7,2,4,10,3,5,9,4,6,8],n1_real=parseInt(value.substr(11,1)),n2_real=parseInt(value.substr(10,1)),n1_counted=0,n2_counted=0,i=0;i<n1_table.length;i++)n1_counted+=n1_table[i]*parseInt(value.charAt(i));if(n1_counted=n1_counted%11%10,n1_counted!=n1_real)return!1;for(var j=0;j<n2_table.length;j++)n2_counted+=n2_table[j]*parseInt(value.charAt(j));return n2_counted=n2_counted%11%10,n2_counted==n2_real}}]),INNValidator}(Validator),SNILSValidator=function(_Validator5){function SNILSValidator(){return _classCallCheck(this,SNILSValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(SNILSValidator).apply(this,arguments))}return _inherits(SNILSValidator,_Validator5),_createClass(SNILSValidator,[{key:"validate",value:function(value){if(value+="",!value||!value.length||11!=value.length)return!1;for(var check_sum=parseInt(value.substr(9)),val=0,i=8;i>=0;i--){var n=parseInt(value.charAt(8-i));val+=n*(i+1)}return val>101&&(val%=101),val>99&&(val=0),val==check_sum}}]),SNILSValidator}(Validator),DateValidator=function(_Validator6){function DateValidator(after,before){_classCallCheck(this,DateValidator);var _this9=_possibleConstructorReturn(this,Object.getPrototypeOf(DateValidator).call(this));return _this9._after=after||new Date(1900,0,1),_this9._before=before||new Date,_this9}return _inherits(DateValidator,_Validator6),_createClass(DateValidator,[{key:"validate",value:function(value){if(value+="",!value||!value.length)return!1;var row=value.split("."),date=row[0],month=row[1],year=row[2];if(date>31||1>date)return!1;if(month>12||1>month)return!1;var test=new Date(year,month-1,date);return date!=test.getDate()?!1:month!=test.getMonth()+1?!1:year!=test.getFullYear()?!1:!(test.getTime()>this._before.getTime()||test.getTime()<this._after.getTime())}}]),DateValidator}(Validator),OMSValidator=function(_RegexpValidator2){function OMSValidator(){return _classCallCheck(this,OMSValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(OMSValidator).call(this,/^\d{16}$/))}return _inherits(OMSValidator,_RegexpValidator2),OMSValidator}(RegexpValidator),EMailValidator=function(_RegexpValidator3){function EMailValidator(){return _classCallCheck(this,EMailValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(EMailValidator).call(this,/.+@.+\..+/))}return _inherits(EMailValidator,_RegexpValidator3),EMailValidator}(RegexpValidator),PhoneValidator=function(_RegexpValidator4){function PhoneValidator(){return _classCallCheck(this,PhoneValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(PhoneValidator).call(this,/^(?!89)[1-9]\d{9}$/))}return _inherits(PhoneValidator,_RegexpValidator4),PhoneValidator}(RegexpValidator),PinValidator=function(_RegexpValidator5){function PinValidator(){return _classCallCheck(this,PinValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(PinValidator).call(this,/^\d{4,10}$/))}return _inherits(PinValidator,_RegexpValidator5),PinValidator}(RegexpValidator),ConfirmPinValidator=function(_RegexpValidator6){function ConfirmPinValidator(_prev){_classCallCheck(this,ConfirmPinValidator);var _this14=_possibleConstructorReturn(this,Object.getPrototypeOf(ConfirmPinValidator).call(this));return _this14._prev=_prev,_this14}return _inherits(ConfirmPinValidator,_RegexpValidator6),_createClass(ConfirmPinValidator,[{key:"validate",value:function(value){return this._prev===value}}]),ConfirmPinValidator}(RegexpValidator),NewPinValidator=function(_RegexpValidator7){function NewPinValidator(){return _classCallCheck(this,NewPinValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(NewPinValidator).apply(this,arguments))}return _inherits(NewPinValidator,_RegexpValidator7),_createClass(NewPinValidator,[{key:"validate",value:function(value){var fails=[function(value){return/(\d)\1{3}/.test(value)},function(value){return/0[0-9]{3}/.test(value)},function(value){return/(?:0(?=1)|1(?=2)|2(?=3)|3(?=4)|4(?=5)|5(?=6)|6(?=7)|7(?=8)|8(?=9)|9(?=0)){3}/.test(value)}],secure=0===fails.filter(function(test){return test(value)}).length;return secure&&/^\d{4,10}$/.test(value)}}]),NewPinValidator}(RegexpValidator),TopupCommentValidator=function(_Validator7){function TopupCommentValidator(exceptionWords){_classCallCheck(this,TopupCommentValidator);var _this16=_possibleConstructorReturn(this,Object.getPrototypeOf(TopupCommentValidator).call(this));return _this16._exceptionWords=exceptionWords.split(",")||[],_this16}return _inherits(TopupCommentValidator,_Validator7),_createClass(TopupCommentValidator,[{key:"validate",value:function(value){if(this._exceptionWords&&value.length>0){var searchValue=value.toLowerCase().replace(/[^А-Яа-яA-Za-z]/g," ").replace(/  +/," ").replace(/^\s+|\s+$/g,"");for(var itm in this._exceptionWords){var first=searchValue.indexOf(this._exceptionWords[itm]),resfirs=0==first?!0:" "==searchValue.charAt(first-1),resend=!1;if(resfirs&&(resend=" "==searchValue.charAt(first+this._exceptionWords[itm].length)||first+this._exceptionWords[itm].length==searchValue.length),resend&&resfirs)return!1}}return!0}}]),TopupCommentValidator}(Validator),LuhnValidator=function(_Validator8){function LuhnValidator(){return _classCallCheck(this,LuhnValidator),_possibleConstructorReturn(this,Object.getPrototypeOf(LuhnValidator).apply(this,arguments))}return _inherits(LuhnValidator,_Validator8),_createClass(LuhnValidator,[{key:"validate",value:function(cardNumber){var _qiwi$utils;if("string"!=typeof cardNumber&&"number"!=typeof cardNumber)throw new Error("Luhn algorithm waited for card number, but got "+cardNumber+" (of type "+("undefined"==typeof cardNumber?"undefined":_typeof(cardNumber))+")");if(cardNumber=[].concat(_toConsumableArray(cardNumber.toString())).filter(function(char){return!/\s/.test(char)}),!cardNumber.length)return!1;if(!(_qiwi$utils=qiwi.utils).correctNumbers.apply(_qiwi$utils,_toConsumableArray(cardNumber)))throw new Error("Luhn algorithm waited for numbers in card, but got "+cardNumber.join(""));cardNumber=cardNumber.join("");var isEven=!(cardNumber.length%2);return cardNumber.split("").map(function(digit,index){return digit=Number(digit),index%2===(isEven?1:0)?digit:(digit*=2,digit>9&&(digit-=9),digit)}).reduce(function(sum,digit){return sum+digit},0)%10===0}}]),LuhnValidator}(Validator),_export("default",{DateValidator:DateValidator,INNValidator:INNValidator,LengthValidator:LengthValidator,NameValidator:NameValidator,OMSValidator:OMSValidator,PassportValidator:PassportValidator,RegexpValidator:RegexpValidator,SNILSValidator:SNILSValidator,PhoneValidator:PhoneValidator,PinValidator:PinValidator,ConfirmPinValidator:ConfirmPinValidator,NewPinValidator:NewPinValidator,TopupCommentValidator:TopupCommentValidator,SumValidator:SumValidator,StrictSumValidator:StrictSumValidator,LuhnValidator:LuhnValidator})}}});